# 关键点
## 不要通过共享内存来通信，通过通信来共享内存


### 一、ping-pong 模式
ping-pong 模式即乒乓球模式，它比较形象地呈现了数据之间一来一回的关系。收到数据的协程可以在不加锁的情况下对数据进行处理，而不必担心有并发冲突。
具体代码实现请看[pingpong_test.go](pingpong_test.go)

![](https://blob.hixforever.com/20230205182004.png)

### 二、fan-in 模式
fan-in 模式又叫扇入模式，意思是多个协程把数据写入到通道中，但只有一个协程等待读取通道数据。
![](https://blob.hixforever.com/20230209143350.png)

### 三、fan-out 模式
fan-out 模式与 fan-in 模式相反，它描述的是一个协程完成数据的写入，但是多个协程抢夺同一个通道中的数据的场景。
Fan-out 模式通常会用在任务的分配中。比方说，程序消费 Kafka、NATS 等中间件的数据，多个协程就会监听同一个通道中的数据，读到数据后立即进行后续的处理，处理完毕后再继续读取，循环往复。
![](https://blob.hixforever.com/20230209143322.png)

### 四、pipeline 模式
pipeline 模式即管道模式，指的是由通道连接的一系列连续的阶段，以类似流的形式进行计算。每个阶段是一组执行特定任务的协程，每个阶段的协程都会通过通道获取从上游传递过来的值，经过处理后，再把新的值发送给下游。
![](https://blob.hixforever.com/20230209143532.png)